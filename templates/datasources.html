<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Sources</title>
    <meta name="description" content="Blueprint: A basic template for a responsive multi-level menu"/>
    <meta name="keywords" content="blueprint, template, html, css, menu, responsive, mobile-friendly"/>
    <link rel="shortcut icon" href="{{ url_for('static', filename='icon/favicon.ico') }}">
    <!-- food icons -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/organicfoodicons.css') }}"/>
    <!-- demo styles -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/demo.css') }}"/>
    <!-- menu styles -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/component.css') }}"/>
    <script type="text/javascript" src="{{ url_for('static', filename='js/modernizr-custom.js') }}"></script>
</head>

<body>
<!-- Main container -->
<div class="container">
    <!-- Blueprint header -->
    <header class="bp-header cf">
        <div class="dummy-logo">
            <div class="dummy-icon foodicon png">
                <img src="../static/img/558x200-kopya.png">
            </div>
            <h2 class="dummy-heading">HeyBooster</h2>
        </div>
        <div class="bp-header__main">
            <span class="bp-header__present">Hey Booster'ı istiyorsan alkışla<span data-content="bilgi"></span></span>

        </div>

    </header>
    <div class="two_button">
        <center>
            <a href="/logout">
                <button class="btn btn-dark btn-lg">Logout</button>
            </a>
            <a href="/datasources">
                <button class="btn btn-dark btn-lg">Data Source</button>
            </a>
        </center>
    </div>
    <div class="content content-1">
        <form method="POST" action="/datasources">
            {{ nForm.csrf_token }}
            {#            <div class="connect-name">
                <label for="validationTooltip01">
                    <h4>Connection Name</h4>
                </label>
                <input type="text" class="form-control" id="validationTooltip01" placeholder="First name"
                       value="Connection" required>
            </div>#}


            <div class="google-option">
                <h4>Google Analytics</h4>

                <h6>Account</h6>
                {{ nForm.account }}

                <h6>Property</h6>
                {{ nForm.property }}

                <h6>View</h6>
                {{ nForm.view }}

            </div>
            <div class="slack-option" id="slack">

                <h4>Slack</h4>
                <h6>Channel</h6>
                {{ nForm.channel }}

                <br>
                <button class="btn btn-dark btnn mt-3" type="submit">Add Data Source</button>
            </div>

        </form>

        <div class="" style="text-align: center;margin-top:5%">
            <button class="icon-btn add-btn">
                <div class="add-icon"></div>
                <div class="btn-txt">Add</div>
            </button>
        </div>

    </div>

</div>
<!-- /view -->
<script src="js/classie.js"></script>
<script src="js/dummydata.js"></script>
<script src="js/main.js"></script>
<script>
    (function () {
        var menuEl = document.getElementById('ml-menu'),
            mlmenu = new MLMenu(menuEl, {
                // breadcrumbsCtrl : true, // show breadcrumbs
                // initialBreadcrumb : 'all', // initial breadcrumb text
                backCtrl: false, // show back button
                // itemsDelayInterval : 60, // delay between each menu item sliding animation
                onItemClick: loadDummyData // callback: item that doesn´t have a submenu gets clicked - onItemClick([event], [inner HTML of the clicked item])
            });

        // mobile menu toggle
        var openMenuCtrl = document.querySelector('.action--open'),
            closeMenuCtrl = document.querySelector('.action--close');

        openMenuCtrl.addEventListener('click', openMenu);
        closeMenuCtrl.addEventListener('click', closeMenu);

        function openMenu() {
            classie.add(menuEl, 'menu--open');
            closeMenuCtrl.focus();
        }

        function closeMenu() {
            classie.remove(menuEl, 'menu--open');
            openMenuCtrl.focus();
        }

        // simulate grid content loading
        var gridWrapper = document.querySelector('.content');

        function loadDummyData(ev, itemName) {
            ev.preventDefault();

            closeMenu();
            gridWrapper.innerHTML = '';
            classie.add(gridWrapper, 'content--loading');
            setTimeout(function () {
                classie.remove(gridWrapper, 'content--loading');
                gridWrapper.innerHTML = '<ul class="products">' + dummyData[itemName] + '<ul>';
            }, 700);
        }
    })();

</script>

<script>
    let account_select = document.getElementById("account");
    let property_select = document.getElementById("property");
    let view_select = document.getElementById("view");
    let bellchar = '';
    account_select.onchange = function () {
        account = account_select.value.split(bellchar)[0];
        fetch('/analytics/properties/' + account).then(function (response) {
            response.json().then(function (data) {
                var optionHTML = '<option value="' + '' + '">' + '-- Select an Option --' + '</option>';
                for (var property of data.properties) {
                    optionHTML += '<option value="' + property.id + bellchar + property.name + '">' + property.name + '</option>';
                }
                property_select.innerHTML = optionHTML;
            })

        });
    }
    property_select.onchange = function () {
        property = property_select.value.split(bellchar)[0];
        fetch('/analytics/views/' + account_select.value.split(bellchar)[0] + '/' + property).then(function (response) {
            response.json().then(function (data) {
                var optionHTML = '<option value="' + '' + '">' + '-- Select an Option --' + '</option>';
                for (var view of data.views) {
                    optionHTML += '<option value="' + view.id + bellchar + view.name + '">' + view.name + '</option>';
                }
                view_select.innerHTML = optionHTML;
            })

        });
    }
</script>

</body>

</html>
